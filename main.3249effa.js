parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"b7Dm":[function(require,module,exports) {
window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(o,t){t=t||window;for(var i=0;i<this.length;i++)o.call(t,this[i],i,this)});
},{}],"w1py":[function(require,module,exports) {
var define;
var e;!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof e&&e.amd?e(n):t.Stats=n()}(this,function(){"use strict";var e=function(){var t=0,n=document.createElement("div");function l(e){return n.appendChild(e.dom),e}function i(e){for(var l=0;l<n.children.length;l++)n.children[l].style.display=l===e?"block":"none";t=e}n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",function(e){e.preventDefault(),i(++t%n.children.length)},!1);var a=(performance||Date).now(),o=a,r=0,f=l(new e.Panel("FPS","#0ff","#002")),c=l(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=l(new e.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:n,addPanel:l,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){r++;var e=(performance||Date).now();if(c.update(e-a,200),o+1e3<=e&&(f.update(1e3*r/(e-o),100),o=e,r=0,d)){var t=performance.memory;d.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:n,setMode:i}};return e.Panel=function(e,t,n){var l=1/0,i=0,a=Math.round,o=a(window.devicePixelRatio||1),r=80*o,f=48*o,c=3*o,d=2*o,p=3*o,u=15*o,s=74*o,m=30*o,h=document.createElement("canvas");h.width=r,h.height=f,h.style.cssText="width:80px;height:48px";var v=h.getContext("2d");return v.font="bold "+9*o+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,r,f),v.fillStyle=t,v.fillText(e,c,d),v.fillRect(p,u,s,m),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(p,u,s,m),{dom:h,update:function(f,y){l=Math.min(l,f),i=Math.max(i,f),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,r,u),v.fillStyle=t,v.fillText(a(f)+" "+e+" ("+a(l)+"-"+a(i)+")",c,d),v.drawImage(h,p+o,u,s-o,m,p,u,s-o,m),v.fillRect(p+s-o,u,o,m),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(p+s-o,u,o,a((1-f/y)*m))}}},e});
},{}],"p0I6":[function(require,module,exports) {
"use strict";Array.prototype.forEach||(Array.prototype.forEach=function(r){var t,o;if(null===this)throw new TypeError("this is null or not defined");var n=Object(this),e=n.length>>>0;if("function"!=typeof r)throw new TypeError(r+" is not a function");for(arguments.length>1&&(t=arguments[1]),o=0;o<e;){var i;o in n&&(i=n[o],r.call(t,i,o,n)),o++}});
},{}],"6sMw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scene=void 0;var e=function(){return function(e){this.resources=e}}();exports.Scene=e;
},{}],"OVb+":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.SceneName=void 0,function(e){e[e.Title=0]="Title",e[e.Opening=1]="Opening",e[e.Train=2]="Train",e[e.GameClear=3]="GameClear",e[e.GameOver=4]="GameOver"}(e=exports.SceneName||(exports.SceneName={}));
},{}],"HJYc":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.GameClear=void 0;var e=require("./scene"),i=require("./scene_name"),s=function(e){function s(t){var i=e.call(this,t)||this;return i.x=0,i.y=0,i.z=30,i.cnt=11,i.resources.loadImages("ienonaka00","ienonaka01","ienonaka02","ienonaka03","ienonaka04","ienonaka05","ienonaka06"),i}return t(s,e),s.prototype.draw=function(){this.x++,this.x<3?image(this.resources.getImage("ienonaka06"),0,0,1920,1080):this.x<6?image(this.resources.getImage("ienonaka05"),0,0,1920,1080):this.x<9?image(this.resources.getImage("ienonaka04"),0,0,1920,1080):this.x<12?image(this.resources.getImage("ienonaka03"),0,0,1920,1080):this.x<15?image(this.resources.getImage("ienonaka02"),0,0,1920,1080):this.x<18?image(this.resources.getImage("ienonaka01"),0,0,1920,1080):this.y<=1&&image(this.resources.getImage("ienonaka00"),0,0,1920,1080),this.x>=24&&this.y>=1&&this.y<=2&&image(this.resources.getImage("watchingnews2"),0,0,1920,1080),this.x>=24&&this.y>=2&&this.y<=7&&image(this.resources.getImage("watchingnews"),0,0,1920,1080),this.x>=24&&this.y>=7&&image(this.resources.getImage("crying"),0,0,1920,1080),this.x>100&&(this.y<this.cnt&&(this.resources.getSound("clearBgm").loop=!0,this.resources.getSound("clearBgm").play()),this.y<this.cnt-1&&image(this.resources.getImage("serihuwin"),0,0),textSize(46),fill(255,255,255),0===this.y?(text("目が覚めた。",230,930),0!==this.z&&this.z--):1===this.y?(text("ぼやっとした意識をなんとか維持しながら、急いでテレビをつける。",230,930),0!==this.z&&this.z--):2===this.y?(text("ニュースが流れている。",230,930),0!==this.z&&this.z--):3===this.y?(text("「速報です。」",230,930),0!==this.z&&this.z--):4===this.y?(text("息を飲んだ。",230,930),0!==this.z&&this.z--):5===this.y?(text("「4月30日、火曜日のニュースです。\n本日、××駅で電車が脱線した事故がありました。」",230,930),0!==this.z&&this.z--):6===this.y?(text("「しかし、なんと死亡者数はゼロでした。軽傷者が何人いるだけで…」",230,930),0!==this.z&&this.z--):7===this.y?(text("私は口を手で塞いで、泣き始めた。",230,930),0!==this.z&&this.z--):8===this.y?(text("「本当によかった…」",230,930),0!==this.z&&this.z--):9===this.y?(text("「よかった…」",230,930),0!==this.z&&this.z--):this.y===this.cnt-1?(image(this.resources.getImage("temp"),0,0,1920,1080),noStroke(),fill(255,255,255,this.z/2*7),rect(0,0,width,height),0!==this.z&&this.z--):this.y===this.cnt&&(image(this.resources.getImage("temp"),0,0,1920,1080),noStroke(),fill(255,255,255,7*(30-this.z)),rect(0,0,width,height),this.resources.getSound("clearBgm").volume=this.z/30,0!==this.z?this.z--:this.y++),this.x%80<40&&this.y<this.cnt-1&&image(this.resources.getImage("winsirusi"),0,0),keyIsDown(13)&&0===this.z&&(this.z=30,this.y<this.cnt-1&&this.resources.getSound("serihuclick").play(),this.y++))},s.prototype.getNextSceneName=function(){return this.y>this.cnt?(this.resources.getSound("clearBgm").pause(),i.SceneName.Title):i.SceneName.GameClear},s}(e.Scene);exports.GameClear=s;
},{"./scene":"6sMw","./scene_name":"OVb+"}],"CA+y":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.GameOver=void 0;var t=require("./scene"),i=require("./scene_name"),s=100,h=216,r=370,n=869,a=456,o=0;function c(){background(0),noStroke(),fill(50)}var g=function(t){function c(e){var i=t.call(this,e)||this;return i.x=0,i.b=0,i.c=0,i.d=30,i.e=11,i}return e(c,t),c.prototype.draw=function(){this.x++,this.b++,this.b<2?image(this.resources.getImage("ienonaka06"),0,0,1930,1080):this.b<5?image(this.resources.getImage("ienonaka05"),0,0,1930,1080):this.b<9?image(this.resources.getImage("ienonaka04"),0,0,1930,1080):this.b<14?image(this.resources.getImage("ienonaka03"),0,0,1930,1080):this.b<19?image(this.resources.getImage("ienonaka02"),0,0,1930,1080):this.b<24?image(this.resources.getImage("ienonaka01"),0,0,1930,1080):image(this.resources.getImage("ienonaka00"),0,0,1930,1080),1===this.c&&image(this.resources.getImage("watchingnews2"),0,0,1930,1080),this.b>=24&&this.c>=2&&image(this.resources.getImage("watchingnews"),0,0,1930,1080),this.b>=24&&this.c>=4&&image(this.resources.getImage("crying"),0,0,1930,1080),this.c>=3&&this.c<5&&this.resources.getSound("atestsound").play(),this.b>100&&(6!==this.c&&image(this.resources.getImage("serihuwin"),0,0),textSize(46),fill(255,255,255),0===this.c?(text("目が覚めた。\n目の前には見慣れた自分の部屋の天井があった。",230,930),0!==this.d&&this.d--):1===this.c?(text("主人公はぼやっとした意識をなんとか維持しながら、\n急いでテレビをつけた。",230,930),0!==this.d&&this.d--):2===this.c?(text("そこには主人公が予測していた最悪な光景が写っていた。",230,930),0!==this.d&&this.d--):3===this.c?(text("「臨時ニュースです。 今朝○○線で脱線事故が発生してしまい\n少なくとも30人の尊い命は失われたと予測されます...」",230,930),0!==this.d&&this.d--):4===this.c?(text("「どうして、、、」",230,930),0!==this.d&&this.d--):5===this.c?(text("主人公が現実を受け入れられず泣き叫んでいると\n急にめまいがして目の前が段々と白くなっていく",230,930),0!==this.d&&this.d--):6===this.c&&(this.d>=23&&this.d<=30?image(this.resources.getImage("atestImage"),0,0,1930,1080):this.d>=16&&this.d<23?image(this.resources.getImage("atestImage"),0,0,1930,1080):this.d>=9&&this.d<16?image(this.resources.getImage("atestImage"),0,0,1930,1080):this.d<9&&image(this.resources.getImage("atestImage"),0,0,1930,1080),0!==this.d&&this.d--),6===this.c&&image(this.resources.getImage("serihuwin"),0,0),6===this.c&&text("やり直しますか？\n       はい/Yes",230,930),this.b%80<40&&this.c!==this.e-1&&this.c<5&&image(this.resources.getImage("winsirusi"),0,0,0,0),keyIsDown(13)&&0===this.d&&(this.d=30,this.c<this.e-1&&this.resources.getSound("serihuclick").play(),this.c++),6===this.c&&this.b%80<40&&image(this.resources.getImage("winsirusi"),-1465,-17,0,0)),(s-=1)<0&&(s=height),line(0,s,width,s),(r-=1)<0&&(r=height),line(0,r,width,r),(n-=1)<0&&(n=height),line(0,n,width,n),(a-=1)<0&&(a=height),line(0,a,width,a),(h-=1)<0&&(h=height),line(0,h,width,h),o+=20,fill(10,0,0),rect(o,0,2500,1100,1e3,1e3,1e3,1e3)},c.prototype.getNextSceneName=function(){return 7===this.c?(this.resources.getSound("atestsound").pause(),i.SceneName.Train):i.SceneName.GameOver},c}(t.Scene);exports.GameOver=g;
},{"./scene":"6sMw","./scene_name":"OVb+"}],"yQtl":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(i,s){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])})(i,s)};return function(i,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function e(){this.constructor=i}t(i,s),i.prototype=null===s?Object.create(s):(e.prototype=s.prototype,new e)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Opening=void 0;var i=require("./scene"),s=require("./scene_name"),e=function(i){function e(t){var s=i.call(this,t)||this;return s.x=0,s.y=0,s.z=30,s.cnt=36,s.temp=1,s.resources.loadImages("ienonaka00","ienonaka01","ienonaka02","ienonaka03","ienonaka04","ienonaka05","ienonaka06"),s}return t(e,i),e.prototype.draw=function(){this.x++,this.y<=1&&image(this.resources.getImage("ichigonews"),0,0,1920,1080),this.y>=1&&this.y<=2&&image(this.resources.getImage("openingwake"),0,0,1920,1080),this.y>=2&&this.y<=3&&(noStroke(),fill(0,0,0),rect(0,0,width,height)),this.y>=3&&this.y<=11&&image(this.resources.getImage("openingtrain"),0,0,1920,1080),this.y>=11&&this.y<=15&&image(this.resources.getImage("openingsinigami"),0,0,1920,1080),this.y>=15&&this.y<=16&&(noStroke(),fill(0,0,0),rect(0,0,width,height)),this.y>=16&&this.y<=19&&image(this.resources.getImage("ienonaka00"),0,0,1920,1080),this.y>=19&&this.y<=25&&image(this.resources.getImage("watchingnews"),0,0,1920,1080),this.y>=25&&this.y<=26&&(noStroke(),fill(0,0,0),rect(0,0,width,height)),this.y>=26&&this.y<=35&&image(this.resources.getImage("openingsinigami"),0,0,1920,1080),this.y<this.cnt&&image(this.resources.getImage("serihuwin"),0,0,1920,1080),textSize(46),fill(255,255,255),this.x>255&&(this.resources.getSound("openingbgm").loop=!0,this.resources.getSound("openingbgm").play()),this.x>255&&0===this.y?(text("「4月30日、火曜日のニュースです。\n本日○○村が巨大なイチゴを栽培することに成功しました。」",230,930),0!==this.z&&this.z--):this.x>255&&1===this.y?(text("私はいつものようにニュースを見ていると、\n謎の倦怠感に襲われ眠りについた。",230,930),0!==this.z&&this.z--):this.x>255&&2===this.y?(text("「……」",230,930),0!==this.z&&this.z--):this.x>255&&3===this.y?(text("目が覚めた。",230,930),0!==this.z&&this.z--):this.x>255&&4===this.y?(text("「何、ここってどこ？」",230,930),0!==this.z&&this.z--):5===this.y?(text("突然、景色が変わっていた。",230,930),0!==this.z&&this.z--):6===this.y?(text("その時、歪んだ機械音が聞こえてくる。",230,930),0!==this.z&&this.z--):7===this.y?(text("「この列車は、本日初運転の新型車両xxxです。\n一新された車内を是非お楽しみください。」",230,930),0!==this.z&&this.z--):8===this.y?(text("私は不安を感じながらその場で立ち止まっていた。",230,930),0!==this.z&&this.z--):9===this.y?(text("でも、その電車はいつまでたっても出発しなかった。",230,930),0!==this.z&&this.z--):10===this.y?(text("いやな予感を感じて、一応前に進もうと思った瞬間。",230,930),0!==this.z&&this.z--):11===this.y?(1===this.temp&&(this.resources.getSound("sinigamieffect").play(),this.temp--),text("「……!!」",230,930),0!==this.z&&this.z--):12===this.y?(text("目の前に小さな、死神のような姿をしているものが二人現れた。",230,930),0!==this.z&&this.z--):13===this.y?(text("「おや？この次元に人間が入り込んだとはな。」\nとその中の一人が言い出した。",230,930),0!==this.z&&this.z--):14===this.y?(text("「鬼ごっこしましょう、負けたらここにいる全員の命はなくなるよ。」\nともう一人が言い出した。",230,930),0!==this.z&&this.z--):15===this.y?(text("その瞬間、私は突然のめまいに襲われて、倒れた。",230,930),0!==this.z&&this.z--):16===this.y?(text("目が覚めた。そこは見慣れた自分の部屋だった。",230,930),0!==this.z&&this.z--):17===this.y?(text("「ゆ…夢なんだ…」",230,930),0!==this.z&&this.z--):18===this.y?(text("私は先程見た夢に強い違和感を感じながら、\nふと、流れているニュースに目がとまった。",230,930),0!==this.z&&this.z--):19===this.y?(text("「4月30日、火曜日のニュースです。今朝○○線で脱線事故が発生して\n少なくとも30人の尊い命は失われたと予測されます...」",230,930),0!==this.z&&this.z--):20===this.y?(text("そこにはとんでもないニュースが流れていた。",230,930),0!==this.z&&this.z--):21===this.y?(text("「え、嘘…」",230,930),0!==this.z&&this.z--):22===this.y?(text("その時、私は気づいた。\nさっき、夢の中の電車が今のニュースで出ていることを。",230,930),0!==this.z&&this.z--):23===this.y?(text("「その子たちが言ってたのって、本当だったの？」",230,930),0!==this.z&&this.z--):24===this.y?(text("その瞬間、また急にめまいに襲われた。",230,930),0!==this.z&&this.z--):25===this.y?(text("「あ…また…」",230,930),0!==this.z&&this.z--):26===this.y?(text("また、あの電車の中。そしてさっきの二人もいた。",230,930),0!==this.z&&this.z--):27===this.y?(text("その二人は戸惑っている私を見て笑っていた。",230,930),0!==this.z&&this.z--):28===this.y?(text("「見たよね? 君は今、次元の隙間に挟まれているよ。」",230,930),0!==this.z&&this.z--):29===this.y?(text("「入り込んだ君を私たちが閉じ込めたんだからね！」",230,930),0!==this.z&&this.z--):30===this.y?(text("「だから、私たちと一緒に鬼ごっこしよう！」",230,930),0!==this.z&&this.z--):31===this.y?(text("「全部見つけたら、この次元から脱出させてやる。\nそして、ここにいる人間も全員見逃してやるよ!」",230,930),0!==this.z&&this.z--):32===this.y?(text("「何それ……」と私は戸惑う。",230,930),0!==this.z&&this.z--):33===this.y?(text("「じゃ、遊ぼうよ！」",230,930),0!==this.z&&this.z--):34===this.y?(fill(250,250,0),text("いきなり操作説明です。",230,930),0!==this.z&&this.z--):35===this.y&&(fill(250,250,0),text("移動：矢印キー、調べる：左クリック\n4台の車両を移動しながら死神を全部探しましょう。",230,930),0!==this.z&&this.z--),this.x%80<40&&this.y!==this.cnt-1&&image(this.resources.getImage("winsirusi"),0,0),keyIsDown(13)&&0===this.z&&(this.z=30,this.y<this.cnt-1&&this.resources.getSound("serihuclick").play(),this.y++),this.x<=255&&(noStroke(),fill(255,255,255,255-this.x),rect(0,0,width,height))},e.prototype.getNextSceneName=function(){return this.y===this.cnt?(this.resources.getSound("openingbgm").pause(),s.SceneName.Train):s.SceneName.Opening},e}(i.Scene);exports.Opening=e;
},{"./scene":"6sMw","./scene_name":"OVb+"}],"sHI/":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{u(n.next(e))}catch(t){a(t)}}function c(e){try{u(n.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,c)}u((n=n.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(c){a=[6,c],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchEncryptedImage=exports.loadEncryptedImage=exports.decryptBase64=void 0;var r=function(e){return e.replace(/; ;/g,"A")};exports.decryptBase64=r;var n=function(e){return"string"==typeof e?loadImage(exports.decryptBase64(e)):e};exports.loadEncryptedImage=n;var o=function(r){return e(void 0,void 0,void 0,function(){var e,n;return t(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,fetch("./images_encrypted/"+r).then(function(e){return e.text()})];case 1:if(0!==(e=t.sent()).indexOf("data:"))throw new Error('dataUri.indexOf("data:") !== 0');return[2,e];case 2:return n=t.sent(),console.log('Could not find file "./images_encrypted/'+r+'"... fall back to "./images/'+r+'". (error: '+n+")"),[2,loadImage("./images/"+r)];case 3:return[2]}})})};exports.fetchEncryptedImage=o;
},{}],"1x5m":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,s){function a(e){try{c(r.next(e))}catch(t){s(t)}}function i(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,i)}c((r=r.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var n,r,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(i){s=[6,i],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Resources=void 0;var n=require("./decrypt_resources"),r=function(){function r(e,t){this.encryptedImages=null,this.decryptedImages={},this.sounds=null,this.imageNames=e,this.soundNames=t}return r.prototype.download=function(){return e(this,void 0,void 0,function(){var e,r,o,s,a,i,c,u,l;return t(this,function(t){switch(t.label){case 0:e={},r=0,o=Object.keys(this.imageNames),t.label=1;case 1:return r<o.length?(l=o[r],s=e,a=l,[4,n.fetchEncryptedImage(this.imageNames[l])]):[3,4];case 2:s[a]=t.sent(),t.label=3;case 3:return r++,[3,1];case 4:for(this.encryptedImages=e,i={},c=0,u=Object.keys(this.soundNames);c<u.length;c++)l=u[c],i[l]=new Audio(this.soundNames[l]);return this.sounds=i,[2]}})})},r.prototype.loadImages=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(null===this.encryptedImages)throw new Error("loadImages() was called before load() method");t.forEach(function(t){t in e.decryptedImages||(e.decryptedImages[t]=n.loadEncryptedImage(e.encryptedImages[t]))})},r.prototype.getImage=function(e){if(null===this.encryptedImages)throw new Error("getImage() was called before load() method");return e in this.decryptedImages||(this.decryptedImages[e]=n.loadEncryptedImage(this.encryptedImages[e])),this.decryptedImages[e]},r.prototype.getSound=function(e){if(null===this.sounds)throw new Error("getSound() was called before load() method");return this.sounds[e]},r}();exports.Resources=r;
},{"./decrypt_resources":"sHI/"}],"s4ad":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])})(t,s)};return function(t,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function r(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Title=void 0;var t=require("./scene"),s=require("./scene_name"),r=function(t){function r(e){var s=t.call(this,e)||this;return s.x=0,s.y=0,s}return e(r,t),r.prototype.draw=function(){image(this.resources.getImage("titleImage00"),0,0,1920,1080),this.resources.getSound("titleBgm").play(),this.x++,this.x<30?image(this.resources.getImage("titleImage00"),0,0,1920,1080):this.x<60?image(this.resources.getImage("titleImage02"),0,0,1920,1080):this.x<70?image(this.resources.getImage("titleImage01"),0,0,1920,1080):this.x<90?image(this.resources.getImage("titleImage02"),0,0,1920,1080):this.x<120?image(this.resources.getImage("titleImage00"),0,0,1920,1080):this.x<150?image(this.resources.getImage("titleImage01"),0,0,1920,1080):this.x<180&&(image(this.resources.getImage("titleImage00"),0,0,1920,1080),this.x=0),mouseX>1500&&mouseX<1800&&mouseY>730&&mouseY<1080?image(this.resources.getImage("titleImageStartw"),1500,730,300,400):image(this.resources.getImage("titleImageStart"),1500,730,300,400)},r.prototype.getNextSceneName=function(){return mouseX>1500&&mouseX<1800&&mouseY>730&&mouseY<1080&&(mouseIsPressed&&0===this.y&&(this.resources.getSound("startbutton").play(),this.y++),mouseIsPressed&&1===this.y)?(this.resources.getSound("titleBgm").pause(),s.SceneName.Opening):s.SceneName.Title},r}(t.Scene);exports.Title=r;
},{"./scene":"6sMw","./scene_name":"OVb+"}],"ZueF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VisualEffectManager=void 0;var e=function(){function e(){this.effects=new Array}return e.prototype.add=function(e,t,i,n,f,c,s,o){this.effects.push({count:0,endTime:c,height:f,image:e,text:s,type:o,width:n,x:t,y:i})},e.prototype.draw=function(){this.effects=this.effects.filter(function(e){return e.count<e.endTime}),this.effects.forEach(function(e){switch(e.count++,e.type){case"blink":e.count%20<10&&(image(e.image,e.x,e.y,e.width,e.height),stroke(255,212,0),textSize(40),text(e.text,e.x+6,e.y+2));break;case"default":image(e.image,e.x,e.y,e.width,e.height)}})},e}();exports.VisualEffectManager=e;
},{}],"DLq7":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Train=void 0;var t=require("./scene"),r=require("./scene_name"),o=require("./visual_effect"),i=[1920,1080],s=[200,200],a=8,n=27,h=function(t){function h(e){var r=t.call(this,e)||this;return r.effect=new o.VisualEffectManager,r.characterPosition={train:0,x:i[0]/2,y:i[1]/2},r.timer=10800,r.grimCount=0,r.isMouseDownLastFrame=!1,r.enemies=[],r.resources.loadImages("background1","background2","background3","background4","mCharB","mCharF","mCharL1","mCharL2","mCharR1","mCharR2","effect","enemyImage1","enemyImage2"),r.hideSystemCursor(),r}return e(h,t),h.generateEnemyArray=function(e,t){for(var r=[],o=0;o<e;o++){for(var s=new Array,a=0;a<t;a++)s.push({foundOtherLap:!1,foundThisLap:!0,foundTime:0,x:Math.random()*i[0]*.8+.1*i[0],y:Math.random()*i[1]*.8+.1*i[1]});r.push(s)}return r},h.prototype.setEnemyArray=function(e){return this.enemies=e,this.enemies.forEach(function(e){for(var t=0,r=e;t<r.length;t++){var o=r[t];o.foundOtherLap=o.foundOtherLap||o.foundThisLap,o.foundThisLap=!1}}),this},h.prototype.draw=function(){this.move(),this.checkEnemyClick(),this.timer--,this.resources.getSound("trainsound").play(),this.drawBackGround(),this.drawEnemies(),this.drawCharacter(),this.drawArrow(),this.drawLoupeCursor(),this.effect.draw(),fill(255,212,0),textSize(50),text("見つけた死神の数 : "+this.grimCount+"/"+n,.65*width,50),text("残り : "+Math.max(Math.round(this.timer/60),0)+" 秒",50,50)},h.prototype.getNextSceneName=function(){return this.grimCount>=n?(this.resources.getSound("trainsound").pause(),this.showSystemCursor(),r.SceneName.GameClear):this.timer<=0||3===this.characterPosition.train&&this.characterPosition.x>=-s[0]/2+width?(this.resources.getSound("trainsound").pause(),this.showSystemCursor(),r.SceneName.GameOver):r.SceneName.Train},h.prototype.drawLoupeCursor=function(){var e=.15*this.resources.getImage("click").width,t=.15*this.resources.getImage("click").height;mouseIsPressed?image(this.resources.getImage("clickEffect"),mouseX-.47*e,mouseY-.36*t,e,t):image(this.resources.getImage("click"),mouseX-.47*e,mouseY-.36*t,e,t)},h.prototype.drawArrow=function(){image(this.resources.getImage("arrow2"),.93*width,.8*height,120,120)},h.prototype.move=function(){keyIsDown(RIGHT_ARROW)&&(this.characterPosition.x+=a),keyIsDown(LEFT_ARROW)&&(this.characterPosition.x-=a,0===this.characterPosition.train&&this.characterPosition.x<0&&(this.characterPosition.x=0)),keyIsDown(UP_ARROW)&&(this.characterPosition.y-=a,this.characterPosition.y<.43*i[1]&&(this.characterPosition.y=.43*i[1])),keyIsDown(DOWN_ARROW)&&(this.characterPosition.y+=a,this.characterPosition.y>.52*i[1]&&(this.characterPosition.y=.52*i[1])),this.characterPosition.x<-s[0]/2&&this.characterPosition.train>0?(this.characterPosition.x=i[0],this.characterPosition.train--,this.resources.getSound("trainsound").play()):this.characterPosition.x>s[0]/2+width&&this.characterPosition.train<3&&(this.characterPosition.x=0,this.characterPosition.train++,this.resources.getSound("trainsound").play())},h.prototype.hideSystemCursor=function(){document.querySelectorAll("*").forEach(function(e){e instanceof HTMLElement&&(e.style.cursor="none")})},h.prototype.showSystemCursor=function(){document.querySelectorAll("*").forEach(function(e){e instanceof HTMLElement&&(e.style.cursor="")})},h.prototype.checkEnemyClick=function(){var e=this,t=!1;if(!this.isMouseDownLastFrame&&mouseIsPressed&&(this.enemies[this.characterPosition.train].forEach(function(r){r.foundThisLap||Math.pow(r.x+80-mouseX,2)+Math.pow(r.y+100-mouseY,2)<Math.pow(100,2)&&(t=!0,e.grimCount++,r.foundThisLap=!0,r.foundTime=frameCount,e.effect.add(e.resources.getImage("effect"),r.x-87.5+.3*e.resources.getImage("enemyImage1").width/2,r.y-100+.3*e.resources.getImage("enemyImage1").height/2,200,200,50,"死神発見！","blink"),e.resources.getSound("shinigamiFound").play())}),!t)){var r=Number.MAX_VALUE;this.enemies[this.characterPosition.train].forEach(function(e){if(!e.foundThisLap){var t=Math.pow(e.x+80-mouseX,2)+Math.pow(e.y+100-mouseY,2);t<r&&(r=t)}}),r<Math.pow(200,2)?this.effect.add(this.resources.getImage("effect"),mouseX-87.5,mouseY-100,200,200,50,"目と鼻の先だ...！","blink"):r<Math.pow(300,2)?this.effect.add(this.resources.getImage("effect"),mouseX-87.5,mouseY-100,200,200,50,"死神の気配がする...","blink"):this.effect.add(this.resources.getImage("effect"),mouseX-87.5,mouseY-100,200,200,50,"死神はいないようだ...","blink"),this.timer-=180}return this.isMouseDownLastFrame=mouseIsPressed,t},h.prototype.drawBackGround=function(){var e=Math.min(0,Math.max(-50,-this.characterPosition.y/height*50)),t=Math.min(0,Math.max(-50,-this.characterPosition.x/width*50));0===this.characterPosition.train?image(this.resources.getImage("background1"),t,e,i[0]+60,i[1]+50):1===this.characterPosition.train?image(this.resources.getImage("background2"),t,e,i[0]+60,i[1]+50):2===this.characterPosition.train?image(this.resources.getImage("background3"),t,e,i[0]+60,i[1]+50):image(this.resources.getImage("background4"),t,e,i[0]+60,i[1]+50)},h.prototype.drawEnemies=function(){var e,t=this;this.enemies[this.characterPosition.train].forEach(function(r){if(r.foundThisLap){e=0===t.characterPosition.train?t.resources.getImage("enemyImage1"):t.resources.getImage("enemyImage2");var o=Math.min(20*(frameCount-r.foundTime),255);o<255?(tint(255,o),image(e,r.x,r.y,.3*e.width,.3*e.height),noTint()):image(e,r.x,r.y,.3*e.width,.3*e.height)}})},h.prototype.drawCharacter=function(){var e;e=keyIsDown(LEFT_ARROW)?Math.round(frameCount/20)%2==1?this.resources.getImage("mCharL1"):this.resources.getImage("mCharL2"):keyIsDown(RIGHT_ARROW)?Math.round(frameCount/20)%2==1?this.resources.getImage("mCharR1"):this.resources.getImage("mCharR2"):keyIsDown(UP_ARROW)?this.resources.getImage("mCharB"):this.resources.getImage("mCharF"),image(e,this.characterPosition.x,this.characterPosition.y,e.width/1.3,e.height/1.3)},h}(t.Scene);exports.Train=h;
},{"./scene":"6sMw","./scene_name":"OVb+","./visual_effect":"ZueF"}],"jP6t":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,n,t,a){return new(t||(t=Promise))(function(r,i){function o(e){try{s(a.next(e))}catch(n){i(n)}}function c(e){try{s(a.throw(e))}catch(n){i(n)}}function s(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,c)}s((a=a.apply(e,n||[])).next())})},n=this&&this.__generator||function(e,n){var t,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(e,o)}catch(c){i=[6,c],a=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),require("nodelist-foreach-polyfill");var a=t(require("stats-js"));require("./for_each_polyfill");var r=require("./gameclear"),i=require("./gameover"),o=require("./opening"),c=require("./resources"),s=require("./scene_name"),u=require("./title"),g=require("./train"),l=function(){return e(void 0,void 0,void 0,function(){var e,t,a;return n(this,function(n){switch(n.label){case 0:return[4,(e=new c.Resources({characterImage:"character.png",enemyImage1:"shinigami_b.png",enemyImage2:"sginigami_g.png",testImage:"test.png",atestImage:"index.png",trainImage:"train.jpg",trainImage2:"title.jpg",titleImage00:"title.jpg",titleImage01:"title01.jpg",titleImage02:"title02.jpg",titleImage03:"title03.jpg",ienonaka00:"scene_ending1.jpg",ienonaka06:"scene_ending1(4).png",ienonaka05:"scene_ending1(3).png",ienonaka04:"scene_ending1(2).png",ienonaka03:"scene_ending1(1).png",ienonaka02:"scene_ending1.png",ienonaka01:"scene_ending1.jpg",serihuwin:"serihu_dummy.png",winsirusi:"sirusi_dummy.png",thanksfor01:"tfp01.png",thanksfor02:"tfp02.png",thanksfor03:"tfp03.png",thanksfor04:"tfp04.png",flashEffectRed:"flash_effect_red.png",mCharB:"m_char_B.png",mCharF:"m_char_F.png",mCharL1:"m_char_L1.png",mCharL2:"m_char_L2.png",mCharR1:"m_char_R1.png",mCharR2:"m_char_R2.png",background1:"background_1.jpg",background2:"background_2.jpg",background3:"background_3.jpg",background4:"background_4.jpg",effect:"effect.png",watchingnews:"badend.jpeg",watchingnews2:"ending_TV.jpg",crying:"ending_cry.jpg",temp:"thankyouforplaying.jpg",ichigonews:"happyend.jpeg",titleImageStartw:"Start button-red.png",click:"click.png",clickEffect:"click_effect.png",titleImageStart:"Start button.png",openingwake:"scene_opening1.jpg",openingtrain:"opening_train.jpg",openingsinigami:"opening_encount.jpg",arrow2:"arrow2.png"},{testSound:"./sounds/tw103.mp3",clearBgm:"./sounds/c20.mp3",serihuclick:"./sounds/click.mp3",atestsound:"./sounds/v1.mp3",trainsound:"./sounds/n98.mp3",shinigamiFound:"./sounds/shinigami_found.mp3",GameClearBGM:"./sounds/c20.mp3",titleBgm:"./sounds/fear.mp3",startbutton:"./sounds/startclick.mp3",openingbgm:"./sounds/openingBGM.mp3",sinigamieffect:"./sounds/shinigami-effect.mp3"})).download()];case 1:return n.sent(),(t=document.querySelector("nav"))instanceof HTMLElement&&(a=t.parentElement)instanceof HTMLElement&&a.removeChild(t),[2,e]}})})},p=null,d=!1,m=null;window.preload=function(){m=loadFont("fonts/NotoSansCJKjp-Medium.ttf")},window.setup=function(){return e(void 0,void 0,void 0,function(){return n(this,function(e){switch(e.label){case 0:return createCanvas(1920,1080),[4,l()];case 1:return p=e.sent(),k(),null!==m?textFont(m):console.log("フォントの読み込みに失敗しました。"),d=!0,[2]}})})};var f=u.Title,h=s.SceneName.Title,w=null,_=new a.default;_.showPanel(0);var y=h,b=g.Train.generateEnemyArray(4,20);window.draw=function(){if(d&&null!==p){_.begin(),null===w&&(w=new f(p))instanceof g.Train&&w.setEnemyArray(b),background("white"),w.draw();var e=w.getNextSceneName();if(e!==y)switch(y=e,e){case s.SceneName.Title:w=new u.Title(p);break;case s.SceneName.Opening:w=new o.Opening(p);break;case s.SceneName.Train:w=new g.Train(p).setEnemyArray(b);break;case s.SceneName.GameClear:w=new r.GameClear(p);break;case s.SceneName.GameOver:w=new i.GameOver(p)}_.end()}};var k=function(){var e=document.querySelector(".p5Canvas");e instanceof HTMLCanvasElement&&(1920/1080>window.innerWidth/window.innerHeight?(e.style.width="100%",e.style.height=""):(e.style.width="",e.style.height="100%"))};window.addEventListener("resize",function(){return k()});
},{"nodelist-foreach-polyfill":"b7Dm","stats-js":"w1py","./for_each_polyfill":"p0I6","./gameclear":"HJYc","./gameover":"CA+y","./opening":"yQtl","./resources":"1x5m","./scene_name":"OVb+","./title":"s4ad","./train":"DLq7"}]},{},["jP6t"], null)